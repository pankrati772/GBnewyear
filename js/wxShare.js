function ajax(d){d=d||{};d.data=d.data||{};var a=d.jsonp?jsonp(d):a(d);function a(f){f.type=(f.type||"GET").toUpperCase();f.data=c(f.data);var e=null;if(window.XMLHttpRequest){e=new XMLHttpRequest()}else{e=new ActiveXObjcet("Microsoft.XMLHTTP")}e.onreadystatechange=function(){if(e.readyState==4){var g=e.status;if(g>=200&&g<300){var h="";var i=e.getResponseHeader("Content-type");if(i.indexOf("xml")!==-1&&e.responseXML){h=e.responseXML}else{if(i==="application/json"){h=JSON.parse(e.responseText)}else{h=e.responseText}}f.success&&f.success(h)}else{f.error&&f.error(g)}}};if(f.type=="GET"){e.open(f.type,f.url+"?"+f.data,true);e.send(null)}else{e.open(f.type,f.url,true);e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");e.send(f.data)}}function c(g){var e=[];for(var f in g){e.push(encodeURIComponent(f)+"="+encodeURIComponent(g[f]))}e.push("v="+b());return e.join("&")}function b(){return Math.floor(Math.random()*10000+500)}}function WxShare(params){var phpdata;var url=window.location.href;ajax({url:"http://www.linmutech.com/gettokens.php",type:"POST",data:{key:"tokens",url:url},success:function(res){phpdata=eval("("+res+")");wx.config({debug:false,ticket:phpdata.ticket,appId:phpdata.appId,timestamp:phpdata.timestamp,nonceStr:phpdata.nonceStr,signature:phpdata.signature,jsApiList:["onMenuShareAppMessage","onMenuShareTimeline","updateAppMessageShareData","updateTimelineShareData"]})},error:function(error){}});wx.ready(function(){wx.onMenuShareAppMessage({title:params.title||"",desc:params.desc||"",link:params.link||"www.linmutech.com",imgUrl:params.link||"",type:"link",});wx.onMenuShareTimeline({title:params.title||"",desc:params.desc||"",link:params.link||url,imgUrl:params.link||"",type:"link",dataUrl:"",});wx.updateTimelineShareData({title:params.title||"",link:params.link||url,imgUrl:params.link||"",});wx.updateAppMessageShareData({title:params.title||"",desc:params.desc||"",link:params.link||url,imgUrl:params.link||"",})})};